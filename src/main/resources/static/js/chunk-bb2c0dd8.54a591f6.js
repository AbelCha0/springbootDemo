(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-bb2c0dd8"],{"0851":function(e,t,a){"use strict";var s=a("c2ac");a.n(s).a},"11d6":function(e,t,a){"use strict";var s=a("d156");a.n(s).a},1503:function(e,t,a){"use strict";var s=a("c1a6");a.n(s).a},"31cb":function(e,t,a){"use strict";a.r(t);a("386d");var s=a("d225"),i=a("b0b4"),n=a("308d"),r=a("6bb5"),o=a("4e2b"),l=a("9ab4"),m=a("1b40"),d=a("5176"),c=a.n(d),u={name:"createSystem",data:function(){return{loading:!1,form:{systemCode:"",systemName:"",department:"",owner:"",ownerPhone:"",ownerEmail:"",ipAddress:[]},rules:{systemCode:[{required:!0,message:"请输入系统编码",trigger:"blur"}],systemName:[{required:!0,message:"请输入系统名称",trigger:"blur"}],department:[{required:!0,message:"请输所属部门",trigger:"blur"}],owner:[{required:!0,message:"请输入负责人姓名",trigger:"blur"}],ownerPhone:[{required:!0,message:"请输入负责人联系方式",trigger:"blur"}],ownerEmail:[{required:!0,message:"请输入负责人邮箱",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.loading=!0,e.$http.post("/api/system",c()({userPassword:123456},e.form)).then(function(t){"success"===t.data.status&&(e.$refs.form.resetFields(),e.$noty.success("新增成功",{timeout:2500}),setTimeout(function(){window.$eventBus.$emit("getSystemList")},500),e.$emit("closeSidebox"))}).finally(function(){e.loading=!1}))})}},mounted:function(){}},f=(a("a1a4"),a("2877")),p=Object(f.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rk-profile-task"},[a("el-form",{ref:"form",staticStyle:{width:"350px",margin:"0 auto"},attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.$t("mySystemPage.systemCode"),prop:"systemCode"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.systemCode,callback:function(t){e.$set(e.form,"systemCode",t)},expression:"form.systemCode"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.systemName"),prop:"systemName"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.systemName,callback:function(t){e.$set(e.form,"systemName",t)},expression:"form.systemName"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.department"),prop:"department"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.owner"),prop:"owner"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.owner,callback:function(t){e.$set(e.form,"owner",t)},expression:"form.owner"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ownerPhone"),prop:"ownerPhone"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.ownerPhone,callback:function(t){e.$set(e.form,"ownerPhone",t)},expression:"form.ownerPhone"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ownerEmail"),prop:"ownerEmail"}},[a("el-input",{attrs:{size:"medium"},model:{value:e.form.ownerEmail,callback:function(t){e.$set(e.form,"ownerEmail",t)},expression:"form.ownerEmail"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ipAddress")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"","allow-create":"","default-first-option":"",placeholder:"请输入IP地址",size:"medium","no-data-text":"输入完成之后按回车选择"},model:{value:e.form.ipAddress,callback:function(t){e.$set(e.form,"ipAddress",t)},expression:"form.ipAddress"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"40%"},attrs:{type:"primary",loading:e.loading,disabled:e.loading},on:{click:e.submit}},[e._v("\n        "+e._s(e.$t("mySystemPage.createSystem"))+"\n      ")]),a("el-button",{staticStyle:{width:"40%"},attrs:{type:"default",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.$emit("closeSidebox")}}},[e._v("\n        "+e._s(e.$t("cancel"))+"\n      ")])],1)],1)],1)},[],!1,null,"c85c457a",null).exports,y=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(n.a)(this,Object(r.a)(t).apply(this,arguments))).keyWord="",e.dialogVisible=!1,e}return Object(o.a)(t,e),Object(i.a)(t,[{key:"created",value:function(){}},{key:"searchTask",value:function(){this.$emit("search",this.keyWord)}},{key:"showDialogTask",value:function(){this.dialogVisible=!0}},{key:"closeSidebox",value:function(){this.dialogVisible=!1}}]),t}(m.d),h=y=l.a([Object(m.a)({components:{mySystemCreate:p}})],y),b=(a("63b2"),Object(f.a)(h,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rk-profile-header"},[a("div",[a("div",{staticClass:"flex-h"},[a("div",{staticClass:"mr-10",staticStyle:{padding:"3px 15px 0"}},[a("div",{staticClass:"sm grey"},[e._v(e._s(e.$t("searchKeyword")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.keyWord,expression:"keyWord"}],staticClass:"rk-profile-header-input",attrs:{type:"text"},domProps:{value:e.keyWord},on:{input:function(t){t.target.composing||(e.keyWord=t.target.value)}}})]),a("a",{staticClass:"rk-profile-header-btn bg-blue mr-10",on:{click:e.searchTask}},[a("svg",{staticClass:"icon mr-5 vm"},[a("use",{attrs:{"xlink:href":"#search"}})]),a("span",{staticClass:"vm"},[e._v(e._s(e.$t("search")))])]),a("a",{directives:[{name:"role",rawName:"v-role",value:[0],expression:"[0]"}],staticClass:"rk-new-task-btn",on:{click:e.showDialogTask}},[a("span",{staticClass:"mr-5 vm"},[e._v(e._s(e.$t("mySystemPage.add")))])])]),a("el-dialog",{staticClass:"profile-task-box",attrs:{width:"600px",title:e.$t("mySystemPage.createSystem"),visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?a("my-system-create",{on:{closeSidebox:e.closeSidebox}}):e._e()],1)],1)])},[],!1,null,null,null).exports),g=(a("6d67"),{name:"editSystem",props:["item","index"],data:function(){return{loading:!1,form:{systemCode:"",systemName:"",department:"",owner:"",ownerPhone:"",ownerEmail:"",ipAddress:[]},rules:{systemCode:[{required:!0,message:"请输入系统编码",trigger:"blur"}],systemName:[{required:!0,message:"请输入系统名称",trigger:"blur"}],department:[{required:!0,message:"请输所属部门",trigger:"blur"}],owner:[{required:!0,message:"请输入负责人姓名",trigger:"blur"}],ownerPhone:[{required:!0,message:"请输入负责人联系方式",trigger:"blur"}],ownerEmail:[{required:!0,message:"请输入负责人邮箱",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.loading=!0,e.$http.put("/api/system",c()({},e.form)).then(function(t){"success"===t.data.status&&(e.$refs.form.resetFields(),e.$noty.success("编辑成功",{timeout:2500}),setTimeout(function(){window.$eventBus.$emit("getSystemList")},500),e.$emit("closeSidebox"))}).finally(function(){e.loading=!1}))})}},watch:{item:{immediate:!0,handler:function(){for(var e in this.form)this.form[e]=this.item[e];this.$forceUpdate()}}},mounted:function(){}}),v=(a("d8e5"),Object(f.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rk-profile-task"},[a("el-form",{ref:"form",staticStyle:{width:"350px",margin:"0 auto"},attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:e.$t("mySystemPage.systemCode"),prop:"systemCode"}},[a("el-input",{attrs:{size:"small",disabled:""},model:{value:e.form.systemCode,callback:function(t){e.$set(e.form,"systemCode",t)},expression:"form.systemCode"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.systemName"),prop:"systemName"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.systemName,callback:function(t){e.$set(e.form,"systemName",t)},expression:"form.systemName"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.department"),prop:"department"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.department,callback:function(t){e.$set(e.form,"department",t)},expression:"form.department"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.owner"),prop:"owner"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.owner,callback:function(t){e.$set(e.form,"owner",t)},expression:"form.owner"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ownerPhone"),prop:"ownerPhone"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.ownerPhone,callback:function(t){e.$set(e.form,"ownerPhone",t)},expression:"form.ownerPhone"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ownerEmail"),prop:"ownerEmail"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.ownerEmail,callback:function(t){e.$set(e.form,"ownerEmail",t)},expression:"form.ownerEmail"}})],1),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ipAddress")}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",multiple:"","allow-create":"","default-first-option":"",placeholder:"请选择",size:"small","no-data-text":"输入完成之后按回车选择"},model:{value:e.form.ipAddress,callback:function(t){e.$set(e.form,"ipAddress",t)},expression:"form.ipAddress"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"40%"},attrs:{type:"primary",loading:e.loading,disabled:e.loading},on:{click:e.submit}},[e._v("\n        "+e._s(e.$t("mySystemPage.editSystem"))+"\n      ")]),a("el-button",{staticStyle:{width:"40%"},attrs:{type:"default",loading:e.loading,disabled:e.loading},on:{click:function(t){return e.$emit("closeSidebox")}}},[e._v("\n        "+e._s(e.$t("cancel"))+"\n      ")])],1)],1)],1)},[],!1,null,"f06f06d2",null).exports),w=[{label:"序号",method:50,value:"index"},{label:"系统编码",method:150,value:"systemCode"},{label:"系统名称",method:200,value:"systemName"},{label:"所属部门",value:"department"},{label:"注册时间",method:200,value:"createDatetime"},{label:"负责人",method:150,value:"owner"},{label:"负责人联系方式",method:150,value:"ownerPhone"},{label:"负责人邮箱",method:250,value:"ownerEmail"},{label:"操作",method:150,value:"apiHandle"}],$=a("5d73"),S=a.n($),x=(a("57e7"),a("ac6a"),a("f3e2"),a("a481"),a("d25f"),{name:"systemDetail",props:["item","index"],data:function(){return{loading:!1,form:{systemCode:"",systemName:"",department:"",ownerEmail:"",owner:"",ownerPhone:"",ipAddress:[]},userList:[]}},methods:{submit:function(){var e=this;this.$refs.form.validate(function(t){if(t){e.loading=!0;var a=e.form.fuzeren.map(function(t){return{role:2,systemCode:e.form.systemCode,memberCode:t}}),s=e.form.guanliyuan.map(function(t){return{role:1,systemCode:e.form.systemCode,memberCode:t}}),i=e.form.chengyuan.map(function(t){return{role:3,systemCode:e.form.systemCode,memberCode:t}});e.$http.put("/api/system",c()({systemMember:a.concat(s,i)},e.form)).then(function(t){"success"===t.data.status&&(e.$refs.form.resetFields(),e.$noty.success("编辑成功",{timeout:2500}),window.$eventBus.$emit("getList"),e.$emit("closeSidebox"))}).finally(function(){e.loading=!1})}})},getAllUser:function(){}},watch:{item:{immediate:!0,handler:function(){for(var e in this.form)this.form[e]=this.item[e];this.form.fuzeren=this.item.systemMember.filter(function(e){return 2==e.role}).map(function(e){return e.memberCode}),this.form.guanliyuan=this.item.systemMember.filter(function(e){return 1==e.role}).map(function(e){return e.memberCode}),this.form.chengyuan=this.item.systemMember.filter(function(e){return 3==e.role}).map(function(e){return e.memberCode}),this.$forceUpdate()}}},mounted:function(){this.getAllUser()}}),k=(a("11d6"),{name:"item",props:["data","method","index"],watch:{data:{handler:function(){this.setLogItemHeight()},deep:!0,immediate:!0}},data:function(){return{dialogVisible:!1,columns:w,displayChildren:!0,selectedSpan:0}},components:{mySystemDetail:Object(f.a)(x,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rk-profile-task"},[a("el-form",{ref:"form",staticStyle:{margin:"0 auto",width:"350px"}},[a("el-form-item",{attrs:{label:e.$t("mySystemPage.systemCode")+":",prop:"systemCode"}},[e._v("\n      "+e._s(e.form.systemCode)+"\n    ")]),a("el-form-item",{attrs:{label:e.$t("mySystemPage.systemName")+":",prop:"systemName"}},[e._v("\n      "+e._s(e.form.systemName)+"\n    ")]),a("el-form-item",{attrs:{label:e.$t("mySystemPage.department")+":",prop:"department"}},[e._v("\n      "+e._s(e.form.department)+"\n    ")]),a("el-form-item",{attrs:{label:e.$t("mySystemPage.owner")+":",prop:"department"}},[e._v("\n      "+e._s(e.form.owner)+"\n    ")]),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ownerPhone")+":",prop:"department"}},[e._v("\n      "+e._s(e.form.ownerPhone)+"\n    ")]),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ownerEmail")+":",prop:"department"}},[e._v("\n      "+e._s(e.form.ownerEmail)+"\n    ")]),a("el-form-item",{attrs:{label:e.$t("mySystemPage.ipAddress")+":"}},[e._v("\n     "+e._s(e.form.ipAddress&&e.form.ipAddress.join?e.form.ipAddress.join("、"):"")+"\n    ")])],1)],1)},[],!1,null,"276279ee",null).exports},computed:{},methods:{lineBreak:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />")},setLogItemHeight:function(){var e=this;this.$nextTick(function(){var t=[];if(e.$refs.logItem){e.$refs.logItem.childNodes.forEach(function(e){if(e.getAttribute("class").indexOf("autoHeight")>-1){var a=e.childNodes[0].getBoundingClientRect().height;t.push(a+11)}});var a=Math.max.apply(Math,t);e.$refs.logItem.style.height=a+"px"}})},showSelectSpan:function(){var e=document.querySelectorAll(".log-item"),t=!0,a=!1,s=void 0;try{for(var i,n=S()(e);!(t=(i=n.next()).done);t=!0){i.value.style.background="#fff"}}catch(e){a=!0,s=e}finally{try{t||null==n.return||n.return()}finally{if(a)throw s}}this.$refs.logItem&&(this.$refs.logItem.style.background="rgba(0, 0, 0, 0.1)",this.$eventBus.$emit("HANDLE-SELECT-LOG",this.data))},del:function(){var e=this;this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.data.systemCode;e.$http.delete("/api/system/"+t).then(function(t){window.$eventBus.$emit("delSystemItem",e.index)})}).catch(function(){})},onedit:function(){this.$emit("onedit",this.index)},closeSidebox:function(){this.dialogEditVisible=!1}}}),_=(a("1503"),{components:{BrowserItem:Object(f.a)(k,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"logItem",class:["log-item","clearfix"],on:{click:e.showSelectSpan}},[e._l(e.columns,function(t,s){return a("div",{key:s,class:["method",["message","stack"].includes(t.value)?"autoHeight":""],style:{lineHeight:1.3,width:t.method+"px"}},[["message","stack"].includes(t.value)?a("span",{staticClass:"text",domProps:{innerHTML:e._s(e.lineBreak(e.data[t.value]))}}):"apiCreateTime"===t.value?[e._v("\n      "+e._s(e._f("dateformat")(e.data.apiCreateTime))+"\n    ")]:"apiState"===t.value?[e._v("\n      "+e._s(1==e.data.apiState?e.$t("enable"):e.$t("disabled"))+"\n    ")]:"apiHandle"===t.value?[e._v("\n       \n      "),a("a",{attrs:{href:"javascript: void 0;"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("查看")]),a("a",{directives:[{name:"role",rawName:"v-role",value:[0,1],expression:"[0,1]"}],attrs:{href:"javascript: void 0;"},on:{click:e.onedit}},[e._v("编辑")]),a("a",{directives:[{name:"role",rawName:"v-role",value:[0],expression:"[0]"}],attrs:{href:"javascript: void 0;"},on:{click:e.del}},[e._v("删除")])]:a("span",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:e.data[t.value]||"-",expression:"data[item.value] || '-'",arg:"bottom"}]},[e._v(e._s(e.data[t.value]||"-"))])],2)}),a("el-dialog",{staticClass:"profile-task-box",attrs:{width:"600px",title:e.$t("detail"),visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.dialogVisible?a("my-system-detail",{attrs:{item:e.data}}):e._e()],1)],2)},[],!1,null,"4c42e948",null).exports,mySystemEdit:v},name:"RegisterContainer",props:["type","tableData","noLink"],data:function(){return{method:380,columns:w,dialogEditVisible:!1,data:{},index:0}},methods:{onedit:function(e){this.dialogEditVisible=!0,this.index=e,this.data=this.tableData[e]},closeSidebox:function(){this.dialogEditVisible=!1}},created:function(){},mounted:function(){}}),C=(a("0851"),{components:{MySystemContainer:Object(f.a)(_,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"log"},[a("div",{staticClass:"log-header"},[e._l(e.columns,function(t,s){return[a("div",{key:s,class:t.label,style:"width: "+t.method+"px"},[e._v("\n        "+e._s(e.$t("mySystemPage."+t.value))+"\n      ")])]})],2),a("div",e._l(e.tableData,function(t,s){return a("BrowserItem",{key:"key"+s,attrs:{method:e.method,data:t,index:s},on:{onedit:e.onedit}})}),1),a("el-dialog",{staticClass:"profile-task-box",attrs:{width:"600px",title:e.$t("mySystemPage.editSystem"),visible:e.dialogEditVisible},on:{"update:visible":function(t){e.dialogEditVisible=t}}},[e.dialogEditVisible?a("my-system-edit",{attrs:{item:e.data,index:e.index},on:{closeSidebox:e.closeSidebox}}):e._e()],1),e._t("default")],2)},[],!1,null,"52b3f78a",null).exports},data:function(){return{tableData:[],diaplay:!0,showDetail:!1,list:[],currentSpan:[],loading:!0,pageSize:10,pageNum:1,total:0,val:""}},methods:{search:function(e){this.val=e,this.getList(e)},getList:function(e){var t=this;this.$http.post("/api/listSystem",{pageNum:this.pageNum,pageSize:this.pageSize,queryStr:e||this.val}).then(function(e){t.loading=!1,t.total=e.data.data.total,t.tableData=e.data.data.list.map(function(e,t){return c()({index:t+1},e)})})}},destroyed:function(){window.$eventBus.$off("getSystemList"),window.$eventBus.$off("delSystemItem")},created:function(){var e=this;this.loading=!0,this.getList(),window.$eventBus.$on("delSystemItem",function(t){e.tableData.splice(t,1)}),window.$eventBus.$on("getSystemList",this.getList)},mounted:function(){}}),P=(a("b1b2"),a("eddd"),Object(f.a)(C,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"trace-detail-chart-table"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"rk-trace-t-loading"},[a("svg",{staticClass:"icon loading"},[a("use",{attrs:{"xlink:href":"#spinner"}})])]),a("MySystemContainer",{attrs:{tableData:e.tableData}},[e.tableData.length?e._e():a("div",{staticClass:"trace-tips"},[e._v(e._s(e.$t("noData")))]),a("div",{staticStyle:{padding:"20px","text-align":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper","current-page":e.pageNum,"page-size":e.pageSize,total:e.total},on:{"update:currentPage":function(t){e.pageNum=t},"update:current-page":function(t){e.pageNum=t},"current-change":e.getList}})],1)])],1)},[],!1,null,null,null).exports),E=function(e){function t(){return Object(s.a)(this,t),Object(n.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"onSearch",value:function(e){this.$refs.table.search(e)}},{key:"beforeMount",value:function(){}}]),t}(m.d),N=E=l.a([Object(m.a)({components:{mySystemHeader:b,mySystemTable:P}})],E),j=(a("5335"),Object(f.a)(N,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rk-profile flex-v"},[t("my-system-header",{on:{search:this.onSearch}}),t("div",{staticClass:"rk-profile-context"},[t("my-system-table",{ref:"table"})],1)],1)},[],!1,null,null,null));t.default=j.exports},5335:function(e,t,a){"use strict";var s=a("9ba8");a.n(s).a},"63b2":function(e,t,a){"use strict";var s=a("778b");a.n(s).a},7616:function(e,t,a){},"778b":function(e,t,a){},"9ba8":function(e,t,a){},a1a4:function(e,t,a){"use strict";var s=a("b196");a.n(s).a},b196:function(e,t,a){},b1b2:function(e,t,a){"use strict";var s=a("d756");a.n(s).a},c1a6:function(e,t,a){},c2ac:function(e,t,a){},d156:function(e,t,a){},d756:function(e,t,a){},d8e5:function(e,t,a){"use strict";var s=a("7616");a.n(s).a},d906:function(e,t,a){},eddd:function(e,t,a){"use strict";var s=a("d906");a.n(s).a}}]);